<?xml version='1.0' encoding='UTF-8'?>
<odoo>

    <record id="product_template_lead" model="ir.ui.view">
        <field name="name">product template lead</field>
        <field name="model">product.template</field>
        <field name="type">tree</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='general_information']" position="after">
                <page name="opportunities" string="Opportunities" attrs="{'invisible':[('id','=',False)]}">
                    <h3>Opportunities:</h3>
                    <field name="lead_ids" domain="[('probability','!=',100)]">
                        <tree>
                            <field name="self"/>
                            <field name="user_id"/>
                            <field name="stage_id"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    <record id="crm_lead_product_opportunities" model="ir.ui.view">
        <field name="name">crm lead product opportunitues</field>
        <field name="model">crm.lead</field>
        <field name="type">tree</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='description']" position="before">
                <field name="product_ids" domain="[('sale_ok','=', True)]">
                    <tree>
                        <field name="product_variant_count" invisible="1"/>
                        <field name="sale_ok" invisible="1"/>
                        <field name="currency_id" invisible="1"/>
                        <field name="cost_currency_id" invisible="1"/>
                        <field name="priority" widget="priority" optional="show" nolabel="1"/>
                        <field name="name" string="Product Name"/>
                        <field name="default_code" optional="show"/>
                        <field name="product_tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" optional="show"/>
                        <field name="barcode" optional="hide" attrs="{'readonly': [('product_variant_count', '&gt;', 1)]}"/>
                        <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company" optional="hide"/>
                        <field name="list_price" string="Sales Price" widget="monetary" options="{'currency_field': 'currency_id'}" optional="hide" decoration-muted="not sale_ok"/>
                        <field name="standard_price" widget="monetary" options="{'currency_field': 'cost_currency_id'}" optional="hide" readonly="1"/>
                        <field name="categ_id" optional="show"/>
                        <field name="detailed_type" optional="hide" readonly="1"/>
                        <field name="type" invisible="1"/>
                        <field name="uom_id" readonly="1" optional="hide" groups="uom.group_uom"/>
                        <field name="active" invisible="1"/>
                        <field name="activity_exception_decoration" widget="activity_exception"/>
                    </tree>
                </field>
            </xpath>
        </field>
    </record>


</odoo>
